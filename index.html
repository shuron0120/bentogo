
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BentoGo - 弁当代行</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #fff; color: #222; }
    header { background: #06c167; color: white; text-align: center; padding: 1em; font-size: 1.7em; }
    .tabs { display: flex; justify-content: center; margin: 1em 0; gap: 10px; }
    .tabs button {
      padding: 1em; flex: 1; font-size: 1em;
      border: none; border-radius: 6px;
      background: #000; color: white;
    }
    .section { padding: 1em; max-width: 600px; margin: auto; }
    .form-group { display: flex; flex-direction: column; gap: 10px; }
    input, select, textarea {
      font-size: 1em; padding: 0.8em; width: 100%;
      box-sizing: border-box;
    }
    .submit-btn {
      background: #06c167; color: white; border: none;
      padding: 1em; border-radius: 6px; font-size: 1em;
    }
    .card {
      border: 1px solid #ccc; border-radius: 10px;
      padding: 1em; margin-top: 1em;
      background: #f9f9f9;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .card.done { background: #d3f9d8; }
    .card button {
      margin-top: 0.5em; padding: 0.5em;
      background: #000; color: white;
      border: none; border-radius: 4px;
    }
    footer { text-align: center; padding: 1em; background: #f1f1f1; font-size: 0.9em; margin-top: 3em; }
  </style>
</head>
<body>
  <header>BentoGo - 弁当代行</header>

  <div class="tabs">
    <button onclick="setMode('order')">弁当を注文</button>
    <button onclick="setMode('confirm')">発注の確認</button>
  </div>

  <div class="section">
    <div id="order-form" class="form-group">
      <input type="text" id="name" placeholder="あなたの名前">
      <select id="menu">
        <option>のり弁 - ¥400</option>
        <option>唐揚げ弁当 - ¥500</option>
        <option>幕の内弁当 - ¥600</option>
      </select>
      <input type="number" id="qty" placeholder="数量" min="1">
      <textarea id="note" placeholder="備考（例：マヨ抜き）"></textarea>
      <input type="time" id="order-time">
      <button class="submit-btn" onclick="submitOrder()">投稿</button>
    </div>

    <div id="confirm-list"></div>
  </div>

  <footer>© 2025 BentoGo</footer>

  <script>
    let mode = 'order';

    function setMode(newMode) {
      mode = newMode;
      document.getElementById('order-form').style.display = mode === 'order' ? 'flex' : 'none';
      renderList();
    }

    function submitOrder() {
      const name = document.getElementById('name').value;
      const menu = document.getElementById('menu').value;
      const qty = document.getElementById('qty').value;
      const note = document.getElementById('note').value;
      const time = document.getElementById('order-time').value;

      if (!name || !qty || !time) {
        alert('名前・数量・注文時刻を入力してください');
        return;
      }

      const order = {
        name, menu, qty, note, time,
        done: false,
        doneTime: ''
      };

      const orders = JSON.parse(localStorage.getItem('orders') || '[]');
      orders.unshift(order);
      localStorage.setItem('orders', JSON.stringify(orders));
      document.getElementById('name').value = '';
      document.getElementById('qty').value = '';
      document.getElementById('note').value = '';
      document.getElementById('order-time').value = '';
      renderList();
    }

    function toggleDone(index) {
      const orders = JSON.parse(localStorage.getItem('orders') || '[]');
      orders[index].done = !orders[index].done;
      orders[index].doneTime = orders[index].done ? new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : '';
      localStorage.setItem('orders', JSON.stringify(orders));
      renderList();
    }

    function renderList() {
      const list = document.getElementById('confirm-list');
      list.innerHTML = '';
      if (mode !== 'confirm') return;

      const orders = JSON.parse(localStorage.getItem('orders') || '[]');
      orders.forEach((o, i) => {
        const div = document.createElement('div');
        div.className = 'card' + (o.done ? ' done' : '');
        div.innerHTML = `
          <strong>${o.name}</strong><br>
          ${o.menu} × ${o.qty}<br>
          備考: ${o.note || 'なし'}<br>
          注文時刻: ${o.time}<br>
          ${o.done ? `✅購入済み (${o.doneTime})` : `<button onclick="toggleDone(${i})">購入完了</button>`}
        `;
        list.appendChild(div);
      });
    }

    setMode('order');
  </script>
</body>
</html>
